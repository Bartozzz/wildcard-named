"use strict";var _escapeRegexp=_interopRequireDefault(require("escape-regexp"));Object.defineProperty(exports,"__esModule",{value:!0}),exports.getValidRegex=getValidRegex,exports.getNamedProps=getNamedProps,exports.getRegexMatches=getRegexMatches,exports.default=test,exports.addFilter=exports.filters=void 0;function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}const filters=new Map;exports.filters=filters;const addFilter=filters.set.bind(filters);exports.addFilter=addFilter,addFilter("digit","([0-9]+)"),addFilter("alnum","([0-9A-Za-z]+)"),addFilter("alpah","([A-Za-z]+)"),addFilter("xdigit","([0-9A-Fa-f]+)"),addFilter("print","([\\x20-\\x7e]*)"),addFilter("upper","([A-Z]+)"),addFilter("lower","([a-z]+)"),addFilter("all","(.*?)"),addFilter("punct","([\\u2000-\\u206F\\u2E00-\\u2E7F\\'!\"#$%&()*+,\\-./:;<=>?@\\[\\]^_`{|}~]+)");function getValidRegex(a){let b=(0,_escapeRegexp.default)(a);for(const c of filters){const a=new RegExp(`\\\\\\[${c[0]}\\\\:[A-Za-z]{0,}?\\\\]`,"g");a.exec(b)&&(b=b.replace(a,c[1]))}return new RegExp(`^${b}$`,"g")}function getNamedProps(a){const b=[];let c=0;return a.replace(/\[(\w+):(\w+)?]/g,(...a)=>(b.push(a[2]||c++),"")),b}function getRegexMatches(a,b){let c=a.exec(b);return c&&(c.shift(),c=Array.from(c)),c}function test(a,b){const c=getValidRegex(b),d=getRegexMatches(c,a);if(!d)return null;const e=getNamedProps(b);return e.reduce((a,b,c)=>(a[b]=d[c],a),{})}